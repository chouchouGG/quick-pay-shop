# 项目介绍

项目基于[微信公众号测试平台] + [支付宝开放平台的沙箱测试环境]，以实际生产中的支付流程，即**扫码登录**、**商品下单**、**支付对接**、**掉单补偿**进行设计和实现。其中微信公众号用于登录、支付宝开放平台用于支付。



# 环境依赖



# 目录结构描述

    ├── ReadMe.md           // 帮助文档
    
    ├── AutoCreateDDS.py    // 合成DDS的 python脚本文件
    
    ├── DDScore             // DDS核心文件库，包含各版本的include、src、lib文件夹，方便合并
    
    │   ├── include_src     // 包含各版本的include、src文件夹
    
    │       ├── V1.0
    
    │           ├── include
    
    │           └── src
    
    │       └── V......
    
    │   └── lib             // 包含各版本的lib文件夹
    
    │       ├── arm64       // 支持arm64系统版本的lib文件夹
    
    │           ├── V1.0
    
    │           └── V......
    
    │       └── x86         // 支持x86系统版本的lib文件夹
    
    │           ├── V1.0
    
    │           └── V......
    
    ├── target              // 合成结果存放的文件夹
    
    └── temp                // 存放待合并的服务的服务文件夹

# 使用说明
- 项目启动时，需要先开启**内网穿透服务**，再启动项目，否则微信公众平台无法对接。







# 实现细节

## 微信公众号登录

1. 对接细节：对接微信公众号需要提供同名但不同请求方式 get、post的两个接口。其中get请求用于验证签名，post 请求用于验签后，接收来自于用户在公众号发送的消息。
2. 内网穿透：项目开发中，通常使用本地（localhost）进行接口测试，但是与微信公众平台进行对接时，微信公众平台无法直接访问本地IP。为解决此问题，需要使用内网穿透，将微信公众平台对本地IP的请求转换为对内网穿透服务端公网IP的访问，再由内网穿透服务完成请求的转发。

## 商品下单&支付付款

![AliPay订单支付流程](docs/image/快付商城-AliPay订单支付流程.png)